(function(s,h){typeof exports=="object"&&typeof module!="undefined"?module.exports=h():typeof define=="function"&&define.amd?define(h):(s=typeof globalThis!="undefined"?globalThis:s||self,s.Petit=h())})(this,function(){"use strict";class s{constructor(t,n){var l,r;this.version=.1,this.petit=n,this.playerEl=t,this.animations=[],this.isPlaying=!1,this.normalSpeed=Math.round(1e3/(n.fr?n.fr:60)),(l=n.layers)==null||l.forEach((i,p)=>{const c=t.querySelectorAll(i.sel);let d=[],a=i.kf[0].kft,f=i.kf[i.kf.length-1].kft;const m={duration:(f-a)*this.normalSpeed,fill:"both",delay:a*this.normalSpeed,endDelay:(n.op-f)*this.normalSpeed},E=f-a>0?f-a:1;i.kf.forEach(function(e,u){if(e.kft){let o=(e.kft-a)/E;e.offset=o}d.push(e)}),c.forEach(e=>{let u=new KeyframeEffect(e,d,i.t?i.t:m),o=new Animation(u);this.animations.push(o),t.dispatchEvent(new CustomEvent("added",{detail:{animation:o,sequence:d,timining:m}}))})}),(r=n.events)==null||r.forEach((i,p)=>{}),this.animations[0].addEventListener("finish",()=>{this.isPlaying=!1,t.dispatchEvent(new CustomEvent("finished"))})}pauseAll(){this.isPlaying=!1,this.animations.forEach(t=>{t.pause()}),this.playerEl.dispatchEvent(new CustomEvent("pause"))}finishAll(){this.isPlaying=!1,this.animations.forEach(t=>{t.finish()}),this.playerEl.dispatchEvent(new CustomEvent("finished"))}playAll(){this.isPlaying=!0,this.playerEl.dispatchEvent(new CustomEvent("play")),this.animations.forEach(t=>{t.play()})}}return s});
